<ion-header [translucent]="true" class="ion-no-border modern-header">
  <ion-list lines="none">
    <ion-list-header class="ion-padding">
      <ion-label color="primary" class="ion-text-center">
        <h1 class="app-title">{{ 'LOGIN.TITLE' | translate }}</h1>
        <p class="app-tagline">{{ 'LOGIN.SUBTITLE' | translate }}</p>
      </ion-label>
    </ion-list-header>
  </ion-list>
</ion-header>

<ion-content class="ion-padding modern-content">
  <swiper-container [pagination]="true" [autoplay]="{ delay: 3000 }">
    <swiper-slide>
      <ion-img src="../assets/imgs/main.svg"></ion-img>
    </swiper-slide>
    <swiper-slide>
      <ion-img src="../assets/imgs/main1.svg"></ion-img>
    </swiper-slide>
    <swiper-slide>
      <ion-img src="../assets/imgs/main2.svg"></ion-img>
    </swiper-slide>
  </swiper-container>

  <!-- Login Form -->
  <div class="form-container">
    <form [formGroup]="form">
      <div id="sign-in-button"></div>

      <!-- Phone Input Card -->
      <ion-card class="phone-input-card">
        <ion-card-content class="card-content">
          <div class="input-wrapper">
            <!-- Country Code Button -->
            <button type="button" class="country-select-btn" (click)="openCountrySearchModal()"
              [disabled]="isInTestMode">
              <img [src]="flag" class="country-flag" />
              <span class="country-code">{{ CountryCode }}</span>
              <ion-icon name="chevron-down-outline" class="dropdown-icon"></ion-icon>
            </button>

            <!-- Phone Number Input -->
            <div class="phone-input-wrapper">
              <ion-input class="phone-input" type="tel" formControlName="phone" [label]="'MOBILE_NUMBER' | translate"
                labelPlacement="stacked" [readonly]="isInTestMode" minlength="10" maxlength="11" (ionFocus)="Show()"
                (ionBlur)="Hide()">
              </ion-input>
            </div>
          </div>


          <!-- Validation Error -->
          <div class="validation-error" *ngIf="!form.get('phone').valid && form.get('phone').touched">
            <ion-text color="danger">
              <small *ngIf="form.get('phone').hasError('required')">
                {{ 'MOBILE_REQUIRED' | translate }}
              </small>
              <small *ngIf="form.get('phone').hasError('minlength') && !form.get('phone').hasError('required')">
                {{ 'MOBILE_INVALID' | translate }}
              </small>
            </ion-text>
          </div>
        </ion-card-content>
      </ion-card>

      <div class="test-mode-notice" *ngIf="isInTestMode">
        <ion-icon name="information-circle-outline"></ion-icon>
        <span>TEST VERSION: Only the default number can be used.</span>
      </div>

      <!-- Submit Button -->
      <ion-button class="submit-btn" shape="round" size="large" type="button" [disabled]="!form.get('phone').valid"
        color="primary" (click)="signIn()" expand="block">
        <span *ngIf="!approve2">{{ 'CONTINUE' | translate }}</span>
        <ion-icon *ngIf="!approve2" slot="end" name="arrow-forward-outline"></ion-icon>
        <ion-spinner *ngIf="approve2" name="crescent"></ion-spinner>
      </ion-button>

      <!-- Divider -->
      <div class="divider-container">
        <div class="divider-line"></div>
        <span class="divider-text">{{ 'OR' | translate }}</span>
        <div class="divider-line"></div>
      </div>

      <!-- Google Login Button -->
      <ion-button class="google-btn" expand="block" shape="round" fill="outline" (click)="signInWithGoogle()"
        [disabled]="defaultLoginConfig?.enabled">
        <ion-icon slot="start" name="logo-google" class="google-icon"></ion-icon>
        <span>{{ 'CONTINUE_WITH_GOOGLE' | translate }}</span>
      </ion-button>
    </form>
  </div>

  <!-- <ion-fab vertical="bottom" horizontal="end" slot="fixed">
    <ion-fab-button>
      <ion-icon name="globe"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button (click)="changeLanguage('en')">
        <ion-img src="https://cdn.kcak11.com/CountryFlags/countries/gb.svg" style="width: 24px; height: 24px;"></ion-img>
      </ion-fab-button>
      <ion-fab-button (click)="changeLanguage('ms')">
        <ion-img src="https://cdn.kcak11.com/CountryFlags/countries/my.svg" style="width: 24px; height: 24px;"></ion-img>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab> -->
  <ion-fab vertical="bottom" horizontal="end" slot="fixed" class="language-fab">
    <ion-fab-button size="small" color="light">
      <ion-icon name="language-outline"></ion-icon>
    </ion-fab-button>
    <ion-fab-list side="top">
      <ion-fab-button (click)="changeLanguage('en')" color="light" size="small">
        <span class="lang-flag">ðŸ‡ºðŸ‡¸</span>
      </ion-fab-button>
      <ion-fab-button (click)="changeLanguage('ms')" color="light" size="small">
        <span class="lang-flag">ðŸ‡²ðŸ‡¾</span>
      </ion-fab-button>
    </ion-fab-list>
  </ion-fab>

</ion-content>
<ion-footer>
  <!-- Add this at the end of your template -->
  <div id="recaptcha-container"></div>
</ion-footer>